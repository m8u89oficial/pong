<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Pong</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  canvas {
    background: #000;
    border: 2px solid white;
    touch-action: none;
  }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = Math.min(window.innerWidth - 20, 600);
  canvas.height = Math.min(window.innerHeight - 20, 400);
}
resize();
window.addEventListener("resize", resize);

let paddleHeight = 80;
let paddleWidth = 10;

let playerY = canvas.height / 2 - paddleHeight / 2;
let aiY = playerY;

let ballX = canvas.width / 2;
let ballY = canvas.height / 2;
let ballSize = 8;
let ballSpeedX = 4;
let ballSpeedY = 4;

let playerScore = 0;
let aiScore = 0;

canvas.addEventListener("mousemove", e => {
  const rect = canvas.getBoundingClientRect();
  playerY = e.clientY - rect.top - paddleHeight / 2;
});

canvas.addEventListener("touchmove", e => {
  const rect = canvas.getBoundingClientRect();
  playerY = e.touches[0].clientY - rect.top - paddleHeight / 2;
});

function update() {
  ballX += ballSpeedX;
  ballY += ballSpeedY;

  if (ballY <= 0 || ballY >= canvas.height) {
    ballSpeedY *= -1;
  }

  if (
    ballX <= paddleWidth &&
    ballY > playerY &&
    ballY < playerY + paddleHeight
  ) {
    ballSpeedX *= -1;
  }

  if (
    ballX >= canvas.width - paddleWidth &&
    ballY > aiY &&
    ballY < aiY + paddleHeight
  ) {
    ballSpeedX *= -1;
  }

  if (ballX < 0) {
    aiScore++;
    resetBall();
  }

  if (ballX > canvas.width) {
    playerScore++;
    resetBall();
  }

  aiY += (ballY - (aiY + paddleHeight / 2)) * 0.05;
}

function resetBall() {
  ballX = canvas.width / 2;
  ballY = canvas.height / 2;
  ballSpeedX *= -1;
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "white";

  ctx.fillRect(0, playerY, paddleWidth, paddleHeight);
  ctx.fillRect(canvas.width - paddleWidth, aiY, paddleWidth, paddleHeight);

  ctx.beginPath();
  ctx.arc(ballX, ballY, ballSize, 0, Math.PI * 2);
  ctx.fill();

  ctx.font = "20px Arial";
  ctx.fillText(playerScore, canvas.width / 4, 30);
  ctx.fillText(aiScore, canvas.width * 3 / 4, 30);
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
